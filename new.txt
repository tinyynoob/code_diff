    reg [4:0]counter;
    always @(negedge CLK) begin
        if (RESET) begin
            counter <= 0;
            DEP_RDY <= 0;
            PW_RDY <= 0;
        end
        // implicitly assume that KERNEL_VALID would be properly turned off
        else if (KERNEL_VALID) begin
            counter <= counter + 1;
            /* ready half-cycle ahead */
            DEP_RDY <= DEP_RDY | (counter == 23);   // counter would become 24 simultaneously
            PW_RDY <= DEP_RDY;  // 1-cycle delay than DEP
        end
        else if (!IN_VALID) begin
            if (counter) begin
                counter <= counter - 1;
                DEP_RDY <= DEP_RDY & !(counter == 1);   // counter would become 0 simultaneously
                PW_RDY <= DEP_RDY;  // 1-cycle delay than DEP
            end
        end
        else
            counter <= counter;
    end

    always @(posedge CLK) begin
        if (RESET)
            RLC_RDY <= 0;
        else if (PW_RDY)
            RLC_RDY <= PW_RDY;   // half-cycle delay than PW
        else
            RLC_RDY <= RLC_RDY;
    end

endmodule